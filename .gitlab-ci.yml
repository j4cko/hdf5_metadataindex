image: rqcd/centos7.2.1511-buildtools

stages:
    - build
    - test

build-job:
    stage: build
    script:
      - yum -y install hdf5 jsoncpp
      - mkdir install
      - cmake -DCMAKE_INSTALL_PREFIX=./install
      - make -j 2 install
    artifacts:
        paths:
          - install/

test-job:
    stage: test
    script:
        - ./install/bin/tests
    dependencies:
        - build-job
